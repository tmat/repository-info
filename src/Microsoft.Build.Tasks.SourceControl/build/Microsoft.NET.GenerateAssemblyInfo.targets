<?xml version="1.0" encoding="utf-8"?>
<Project>
  <!-- 
    TODO: move to Microsoft.NET.GenerateAssemblyInfo.targets 
    Update CoreGenerateAssemblyInfo instead of defining an extra target
  -->

  <PropertyGroup>
    <IncludeSourceRevisionInInformationalVersion Condition="'$(IncludeSourceRevisionInInformationalVersion)' == ''">true</IncludeSourceRevisionInInformationalVersion>
  </PropertyGroup>

  <Target Name="_IncludeSourceRevisionInInformationalVersion"
          BeforeTargets="GetAssemblyAttributes"
          DependsOnTargets="SetSourceRevisionId"
          Condition="'$(IncludeSourceRevisionInInformationalVersion)' == 'true'">

    <PropertyGroup Condition="'$(SourceRevisionId)' != ''">
      <InformationalVersion>$(InformationalVersion) (revision $(SourceRevisionId))</InformationalVersion>
    </PropertyGroup>
  </Target>
</Project>